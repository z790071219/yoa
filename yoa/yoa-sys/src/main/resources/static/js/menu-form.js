var menuForm={
    icon:["am-icon-wpforms","am-icon-viadeo-square","am-icon-volume-control-phone","am-icon-wheelchair-alt","am-icon-wpbeginner","am-icon-wpforms","am-icon-yoast","am-icon-bluetooth","am-icon-bluetooth-b","am-icon-codiepie","am-icon-credit-card-alt","am-icon-edge","am-icon-fort-awesome","am-icon-hashtag","am-icon-mixcloud","am-icon-modx","am-icon-pause-circle","am-icon-pause-circle-o","am-icon-percent","am-icon-product-hunt","am-icon-reddit-alien","am-icon-scribd","am-icon-shopping-bag","am-icon-shopping-basket","am-icon-stop-circle","am-icon-stop-circle-o","am-icon-usb","am-icon-500px","am-icon-amazon","am-icon-balance-scale","am-icon-battery-0","am-icon-battery-1","am-icon-battery-2","am-icon-battery-3","am-icon-send-o","am-icon-share","am-icon-share-alt","am-icon-share-alt-square","am-icon-share-square","am-icon-share-square-o","am-icon-shield","am-icon-shopping-cart","am-icon-sign-in","am-icon-sign-out","am-icon-signal","am-icon-sitemap","am-icon-sliders","am-icon-smile-o","am-icon-soccer-ball-o","am-icon-sort","am-icon-sort-alpha-asc","am-icon-sort-alpha-desc","am-icon-sort-amount-asc","am-icon-sort-amount-desc","am-icon-sort-asc","am-icon-sort-desc","am-icon-sort-down","am-icon-sort-numeric-asc","am-icon-sort-numeric-desc","am-icon-sort-up","am-icon-space-shuttle","am-icon-spinner","am-icon-spoon","am-icon-square","am-icon-square-o","am-icon-star","am-icon-star-half","am-icon-star-half-empty","am-icon-star-half-full","am-icon-star-half-o","am-icon-star-o","am-icon-suitcase","am-icon-sun-o","am-icon-support","am-icon-tablet","am-icon-tachometer","am-icon-tag","am-icon-tags","am-icon-tasks","am-icon-taxi","am-icon-terminal","am-icon-thumb-tack","am-icon-thumbs-down","am-icon-thumbs-o-down","am-icon-thumbs-o-up","am-icon-thumbs-up","am-icon-ticket","am-icon-times","am-icon-times-circle","am-icon-times-circle-o","am-icon-tint","am-icon-toggle-down","am-icon-toggle-left","am-icon-toggle-off","am-icon-toggle-on","am-icon-toggle-right","am-icon-toggle-up","am-icon-trash","am-icon-trash-o","am-icon-tree","am-icon-trophy","am-icon-truck","am-icon-tty","am-icon-umbrella","am-icon-university","am-icon-unlock","am-icon-unlock-alt","am-icon-unsorted","am-icon-upload","am-icon-user","am-icon-users","am-icon-video-camera","am-icon-volume-down","am-icon-volume-off","am-icon-volume-up","am-icon-warning","am-icon-wheelchair","am-icon-wifi","am-icon-wrench","am-icon-file","am-icon-file-archive-o","am-icon-file-audio-o","am-icon-file-code-o","am-icon-file-excel-o","am-icon-file-image-o","am-icon-file-movie-o","am-icon-file-o","am-icon-file-pdf-o","am-icon-file-photo-o","am-icon-file-picture-o","am-icon-file-powerpoint-o","am-icon-file-sound-o","am-icon-file-text","am-icon-file-text-o","am-icon-file-video-o","am-icon-file-word-o","am-icon-file-zip-o","am-icon-circle-o-notch","am-icon-cog","am-icon-gear","am-icon-refresh","am-icon-spinner","am-icon-check-square","am-icon-check-square-o","am-icon-circle","am-icon-circle-o","am-icon-dot-circle-o","am-icon-minus-square","am-icon-minus-square-o","am-icon-plus-square","am-icon-plus-square-o","am-icon-square","am-icon-square-o","am-icon-cc-amex","am-icon-cc-discover","am-icon-cc-mastercard","am-icon-cc-paypal","am-icon-cc-stripe","am-icon-cc-visa","am-icon-credit-card","am-icon-google-wallet","am-icon-paypal","am-icon-area-chart","am-icon-bar-chart","am-icon-bar-chart-o","am-icon-line-chart","am-icon-pie-chart","am-icon-bitcoin","am-icon-btc","am-icon-cny","am-icon-dollar","am-icon-eur","am-icon-euro","am-icon-gbp","am-icon-ils","am-icon-inr","am-icon-jpy","am-icon-krw","am-icon-money","am-icon-rmb","am-icon-rouble","am-icon-rub","am-icon-ruble","am-icon-rupee","am-icon-shekel","am-icon-sheqel","am-icon-try","am-icon-turkish-lira","am-icon-usd","am-icon-won","am-icon-yen","am-icon-align-center","am-icon-align-justify","am-icon-align-left","am-icon-align-right","am-icon-bold","am-icon-chain","am-icon-chain-broken","am-icon-clipboard","am-icon-columns","am-icon-copy","am-icon-cut","am-icon-dedent","am-icon-eraser","am-icon-file","am-icon-file-o","am-icon-file-text","am-icon-file-text-o","am-icon-files-o","am-icon-floppy-o","am-icon-font","am-icon-header","am-icon-indent","am-icon-italic","am-icon-link","am-icon-list","am-icon-list-alt","am-icon-list-ol","am-icon-list-ul","am-icon-outdent","am-icon-paperclip","am-icon-paragraph","am-icon-paste","am-icon-repeat","am-icon-rotate-left","am-icon-rotate-right","am-icon-save","am-icon-scissors","am-icon-strikethrough","am-icon-subscript","am-icon-superscript","am-icon-table","am-icon-text-height","am-icon-text-width","am-icon-th","am-icon-th-large","am-icon-th-list","am-icon-underline","am-icon-undo","am-icon-unlink","am-icon-angle-double-down","am-icon-angle-double-left","am-icon-angle-double-right","am-icon-angle-double-up","am-icon-angle-down","am-icon-angle-left","am-icon-angle-right","am-icon-angle-up","am-icon-arrow-circle-down","am-icon-arrow-circle-left","am-icon-arrow-circle-o-down","am-icon-arrow-circle-o-left","am-icon-arrow-circle-o-right","am-icon-arrow-circle-o-up","am-icon-arrow-circle-right","am-icon-arrow-circle-up","am-icon-arrow-down","am-icon-arrow-left","am-icon-arrow-right","am-icon-arrow-up","am-icon-arrows","am-icon-arrows-alt","am-icon-caret-square-o-down","am-icon-caret-square-o-left","am-icon-caret-square-o-right","am-icon-caret-square-o-up","am-icon-caret-up","am-icon-chevron-circle-down","am-icon-chevron-circle-left","am-icon-chevron-circle-right","am-icon-chevron-circle-up","am-icon-chevron-down","am-icon-chevron-left","am-icon-chevron-right","am-icon-chevron-up","am-icon-hand-o-down","am-icon-hand-o-left","am-icon-hand-o-right","am-icon-hand-o-up","am-icon-long-arrow-down","am-icon-long-arrow-left","am-icon-long-arrow-right","am-icon-long-arrow-up","am-icon-toggle-down","am-icon-toggle-left","am-icon-toggle-right","am-icon-toggle-up","am-icon-arrows-alt","am-icon-backward","am-icon-compress","am-icon-eject","am-icon-expand","am-icon-fast-backward","am-icon-fast-forward","am-icon-forward","am-icon-pause","am-icon-play","am-icon-play-circle","am-icon-play-circle-o","am-icon-step-backward","am-icon-step-forward","am-icon-stop","am-icon-youtube-play","am-icon-adn","am-icon-android","am-icon-angellist","am-icon-apple","am-icon-behance","am-icon-behance-square","am-icon-bitbucket","am-icon-bitbucket-square","am-icon-bitcoin","am-icon-btc","am-icon-cc-amex","am-icon-cc-discover","am-icon-cc-mastercard","am-icon-cc-paypal","am-icon-cc-stripe","am-icon-cc-visa","am-icon-codepen","am-icon-css3","am-icon-delicious","am-icon-deviantart","am-icon-digg","am-icon-dribbble","am-icon-dropbox","am-icon-drupal","am-icon-empire","am-icon-facebook","am-icon-facebook-square","am-icon-flickr","am-icon-foursquare","am-icon-ge","am-icon-git","am-icon-git-square","am-icon-github","am-icon-github-alt","am-icon-github-square","am-icon-gittip","am-icon-google","am-icon-google-plus","am-icon-google-plus-square","am-icon-google-wallet","am-icon-hacker-news","am-icon-html5","am-icon-instagram","am-icon-ioxhost","am-icon-joomla","am-icon-jsfiddle","am-icon-lastfm","am-icon-lastfm-square","am-icon-linkedin","am-icon-linkedin-square","am-icon-linux","am-icon-maxcdn","am-icon-meanpath","am-icon-openid","am-icon-pagelines","am-icon-paypal","am-icon-pied-piper","am-icon-pied-piper-alt","am-icon-pinterest","am-icon-pinterest-square","am-icon-qq","am-icon-ra","am-icon-rebel","am-icon-reddit","am-icon-reddit-square","am-icon-renren","am-icon-share-alt","am-icon-share-alt-square","am-icon-skype","am-icon-slack","am-icon-slideshare","am-icon-soundcloud","am-icon-spotify"],
    getIcon:function () {
        $("#icon-modal").modal();
        $("#icon-modal .am-modal-bd").empty();
        for (var i=0;i<this.icon.length ;i++){
            $("#icon-modal .am-modal-bd").append('<i onclick="menuForm.selectIcon(this)" class="'+this.icon[i]+'"></i>'+'&nbsp&nbsp');
        }

    },
    selectIcon:function($i){
        $('#icon').val($i.className);
        $('#selectedIcon').attr('class',$i.className);
        $("#icon-modal").modal('close');
    },
    getPNode:function(){
        $("#pnode-modal").modal();
    },
    selectPNode:function (node) {
        $("#pNode").val(node);
        $("#pnode-modal").modal('close');
    },
    getPermissions:function(){
        $("#permissions-modal").modal();
    },
    selectPermissions:function(id,name){
        $("#permissionsId").val(id);
        $("#permissions").val(name);
        $("#permissions-modal").modal('close');
    },
    
    submitForm(method){
        if ($("#type option:selected").val()==1)
            pnode:$("#pNode").val("-1");
        var data={
            id:$("#id").val(),
            name:$("#name").val(),
            type:$("#type option:selected").val(),
            description:$("#description").val(),
            url:$("#url").val(),
            icon:$("#icon").val(),
            pnode:$("#pNode").val(),
            permissionsId:$("#permissionsId").val()
        }
        $.ajax({
            url:'/menu',
            method:method,
            data:JSON.stringify(data),
            dataType: "json",
            contentType:"application/json",
            success:function (data) {
                if (data.code==0){
                    alert("success");
                    window.location.href="/menu/"+data.message.id;
                }
                else
                    alert(data.error);
            }
        })
    }

}